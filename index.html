<!DOCTYPE html>
<html>
<head>
    <title>Fyers Login</title>
    <!-- Official Fyers SDK -->
    <script src="https://cdn.fyers.in/sdk/web/fyers-ssa-v3.min.js"></script>
</head>
<body>
    <h2>Login to FYERS</h2>
    <button onclick="fyersLogin()">Login with Fyers</button>

    <script>
        // Generate random state for security
        function generateRandomString(length = 15) {
            return Math.random().toString(36).substr(2, length);
        }

        async function fyersLogin() {
            try {
                const config = {
                    client_id: "O0P41O9GM2-100",
                    redirect_uri: "https://ajay123400.github.io/fyers-login/",
                    response_type: "code",
                    state: generateRandomString(),
                    scope: "profile trade",
                    nonce: generateRandomString()
                };

                // Initialize Fyers Auth V2
                const fyersAuth = new FyersAuthV2();
                
                // Generate authorization URL
                const authUrl = await fyersAuth.generateAuthUrl(config);
                
                // Redirect to Fyers login
                window.location.href = authUrl;

            } catch (error) {
                console.error('Login Error:', error);
                alert('Login failed! Check console for details.');
            }
        }
    </script>
</body>
</html>
